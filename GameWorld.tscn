[gd_scene load_steps=20 format=3 uid="uid://b1lpjmmgbed8y"]

[ext_resource type="PackedScene" uid="uid://dmmh6pklckqiy" path="res://DeliveryTruck.tscn" id="1"]
[ext_resource type="Script" path="res://CameraOrigin.gd" id="2"]
[ext_resource type="Script" path="res://Player.gd" id="3"]
[ext_resource type="Texture2D" uid="uid://dljm4um4spkw5" path="res://BrickTexture.png" id="4"]
[ext_resource type="Texture2D" uid="uid://bjx60g3bonoqg" path="res://Package.png" id="5"]
[ext_resource type="Texture2D" uid="uid://c1hmmr68dqhtv" path="res://UIBox.png" id="6"]
[ext_resource type="Texture2D" uid="uid://c7mlpslno8t08" path="res://InventoryGrid.png" id="7"]
[ext_resource type="Theme" uid="uid://b0i0qmtemq4qw" path="res://theme.tres" id="8"]
[ext_resource type="Script" path="res://PackageCount.gd" id="9"]
[ext_resource type="Script" path="res://InteractLabel.gd" id="10"]
[ext_resource type="Environment" uid="uid://eklt5i3g1r3s" path="res://default_env.tres" id="12_ixt3a"]
[ext_resource type="MeshLibrary" uid="uid://cjrdo7u2jyufq" path="res://Waende.tres" id="12_vohnb"]
[ext_resource type="Script" path="res://Mob.gd" id="13_n1egs"]

[sub_resource type="BoxShape3D" id="6"]
size = Vector3(1.17229, 2.23182, 1.88334)

[sub_resource type="StandardMaterial3D" id="5"]
albedo_texture = ExtResource("4")
uv1_scale = Vector3(24, 24, 24)
texture_filter = 4

[sub_resource type="PhysicsMaterial" id="4"]
rough = true

[sub_resource type="CapsuleShape3D" id="2"]
radius = 0.3
height = 1.5

[sub_resource type="SphereShape3D" id="3"]
radius = 1.633

[sub_resource type="NavigationMesh" id="NavigationMesh_osh2p"]
sample_partition_type = 2

[node name="Node3D" type="Node3D"]

[node name="CameraOrigin" type="Node3D" parent="."]
transform = Transform3D(0.707107, 0.577353, 0.408244, 0, 0.577345, -0.816501, -0.707107, 0.577353, 0.408244, -6.90755, 0, -6.87632)
script = ExtResource("2")
initialFollow = NodePath("../Player")

[node name="Camera3D" type="Camera3D" parent="CameraOrigin"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 70, -0.224)
fov = 15.0
size = 8.0
near = 5.0
far = 500.0

[node name="DeliveryTruck" parent="." instance=ExtResource("1")]
transform = Transform3D(0.998097, 0, 0.0616583, 0, 1, 0, -0.0616583, 0, 0.998097, -11.8023, 0, -9.12512)

[node name="ItemReceiver" type="Area3D" parent="."]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, -7.46622, -0.16236, -9.6132)
collision_layer = 65536
collision_mask = 65536

[node name="CollisionShape3D" type="CollisionShape3D" parent="ItemReceiver"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.261911, 1.38688, 0)
shape = SubResource("6")

[node name="CSGBox3D" type="CSGBox3D" parent="ItemReceiver"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.136185, 1.47411, 0.0134177)

[node name="Floor" type="CSGBox3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, -1, 0)
use_collision = true
size = Vector3(200, 2, 200)
material = SubResource("5")

[node name="Player" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.8695, 0.05, -6.74073)
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
mass = 6.12245
physics_material_override = SubResource("4")
can_sleep = false
linear_damp = 0.9
script = ExtResource("3")
cameraPath = NodePath("../CameraOrigin")
feet_height = 0.09

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 1.06581e-14, 0, -1.06581e-14, 1, 0, 0.695319, 0)
shape = SubResource("2")

[node name="CSGBox3D" type="CSGBox3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.703999, 0)
size = Vector3(0.566182, 1.42149, 0.477852)

[node name="InteractArea" type="Area3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.304681, 0)
collision_layer = 0
collision_mask = 65536

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/InteractArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.04525, 0)
shape = SubResource("3")

[node name="GUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("8")

[node name="Inventory" type="NinePatchRect" parent="GUI"]
visible = false
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 16.0
offset_top = -224.0
offset_right = 352.0
offset_bottom = -16.0
grow_vertical = 0
texture = ExtResource("6")
patch_margin_left = 6
patch_margin_top = 6
patch_margin_right = 6
patch_margin_bottom = 6

[node name="Grid" type="TextureRect" parent="GUI/Inventory"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 8.0
offset_top = 8.0
offset_right = -7.0
offset_bottom = -7.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("7")
stretch_mode = 2

[node name="Item" type="Control" parent="GUI"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 16.0
offset_top = -80.0
offset_right = 80.0
offset_bottom = -16.0
grow_vertical = 0
tooltip_text = "\"Package\""

[node name="TextureRect" type="TextureRect" parent="GUI/Item"]
texture_filter = 1
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("5")

[node name="PackageCount" type="Label" parent="GUI/Item"]
layout_mode = 1
anchors_preset = -1
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
grow_vertical = 2
text = "x1"
vertical_alignment = 1
script = ExtResource("9")

[node name="Label" type="Label" parent="GUI"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -133.0
offset_right = 133.0
text = "Press E to interact"
horizontal_alignment = 1
script = ExtResource("10")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("12_ixt3a")

[node name="Grid_Fronts" type="GridMap" parent="."]
mesh_library = ExtResource("12_vohnb")
cell_size = Vector3(4, 3.2, 4)
cell_center_x = false
cell_center_y = false
cell_center_z = false
data = {
"cells": PackedInt32Array(1, 65532, 655366, 2, 65532, 655368, 3, 65532, 655364, 65537, 65532, 655363, 65536, 65532, 655367, 65538, 65532, 655369, 65539, 65532, 655361, 3, 65531, 1441796, 3, 65530, 1441798, 3, 65529, 1441796, 65539, 65528, 1441795, 65539, 65529, 1441797, 65539, 65531, 1441797, 65539, 65530, 1441795, 131075, 65530, 1441795, 196611, 65530, 1441795, 131073, 65532, 655363, 196609, 65532, 655363, 131075, 65528, 1441795, 196611, 65528, 1441795, 131075, 65529, 1441797, 196611, 65529, 1441797, 131075, 65531, 1441797, 196611, 65531, 1441797, 131075, 65532, 655361, 196611, 65532, 655361, 131074, 65532, 655369, 196610, 65532, 655369, 131072, 65532, 655367, 196608, 65532, 655367, 0, 65532, 655368, 3, 65528, 1441792, 2, 65528, 4, 1, 65528, 4, 0, 65528, 4, 65535, 65528, 4, 65535, 65529, 1048580, 65535, 65530, 1048580, 65535, 65531, 1048580, 65535, 65532, 1048580, 0, 65530, 655364, 1, 65530, 655364, 1, 65529, 1441796, 1, 65531, 1441796, 2, 65531, 655364, 2, 65530, 655364, 65534, 65531, 1441796, 65534, 65530, 1441796, 65534, 65532, 655366, 65533, 65532, 655368, 65532, 65532, 1441796, 131070, 65530, 1441802, 131070, 65531, 1441802, 131069, 65532, 655370, 131070, 65532, 655370, 65532, 65533, 1441794, 65532, 65534, 1441798, 65532, 65535, 655364, 65531, 65535, 655364, 0, 3, 655364, 1, 3, 655362, 1, 11, 1441792, 1, 12, 1441798, 1, 14, 655364, 2, 3, 655366, 2, 6, 1441798, 3, 3, 655360, 4, 65535, 1441798, 4, 0, 1441792, 4, 1, 1441796, 4, 2, 1441792, 4, 3, 655360, 8, 6, 1441798, 1, 18, 1441798, 1, 20, 655364, 0, 14, 655362, 0, 20, 655362, 1, 13, 1441792, 1, 17, 1441792, 1, 19, 1441792, 2, 8, 655360, 1, 8, 655364, 0, 8, 655368, 2, 7, 1441800, 8, 7, 1441800, 6, 8, 655368, 8, 8, 655360, 7, 8, 655364, 6, 14, 655364, 11, 14, 655364, 6, 20, 655364, 11, 20, 655364, 5, 20, 655362, 10, 20, 655362, 10, 14, 655362, 5, 14, 655362, 11, 17, 1441792, 11, 19, 1441792, 6, 19, 1441792, 6, 17, 1441792, 6, 13, 1441792, 6, 11, 1441792, 11, 13, 1441792, 11, 11, 1441792, 11, 18, 1441798, 11, 12, 1441798, 6, 12, 1441798, 6, 18, 1441798)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="Grid_Backs" type="GridMap" parent="."]
mesh_library = ExtResource("12_vohnb")
cell_size = Vector3(4, 3.2, 4)
cell_center_x = false
cell_center_y = false
cell_center_z = false
data = {
"cells": PackedInt32Array(65533, 65530, 4, 65532, 65530, 4, 65532, 65531, 1048580, 65532, 65532, 1048580, 65531, 65532, 4, 65530, 65532, 4, 65530, 65533, 1048580, 65530, 65534, 1048580, 65530, 65535, 1048580, 65535, 65535, 4, 65535, 0, 1048580, 65535, 1, 1048580, 65535, 2, 1048580, 65535, 3, 1048580, 65535, 7, 1048580, 65535, 12, 1048580, 65535, 14, 1048580, 0, 65535, 4, 1, 65535, 4, 2, 65535, 4, 3, 65535, 4, 65535, 13, 1048580, 65535, 18, 1048580, 65535, 19, 1048580, 65535, 20, 1048580, 65535, 6, 4, 0, 6, 4, 1, 6, 4, 65535, 11, 4, 0, 11, 4, 65535, 17, 4, 0, 17, 4, 4, 11, 4, 5, 11, 4, 4, 17, 4, 5, 17, 4, 4, 20, 1048580, 4, 19, 1048580, 4, 18, 1048580, 4, 13, 1048580, 4, 12, 1048580, 4, 14, 1048580, 9, 12, 1048580, 9, 13, 1048580, 9, 14, 1048580, 9, 18, 1048580, 9, 19, 1048580, 9, 20, 1048580, 9, 17, 4, 10, 17, 4, 9, 11, 4, 10, 11, 4, 5, 6, 4, 6, 6, 4, 5, 8, 1048580, 5, 7, 1048580, 7, 6, 4, 65535, 8, 1048580)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="Node3D" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.1404, -0.62556, 15.0949)

[node name="CSGBox3D" type="CSGBox3D" parent="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 0.999999, 0.985379, 0, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D2" type="CSGBox3D" parent="Node3D"]
transform = Transform3D(0.996194, 0.0871558, 0, -0.0871557, 0.996195, 0, 0, 0, 0.999999, -1.43778, 0.106443, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D3" type="CSGBox3D" parent="Node3D"]
transform = Transform3D(0.996194, 0.0871558, 0, -0.0871557, 0.996195, 0, 0, 0, 0.999999, -1.43778, 0.106443, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D4" type="CSGBox3D" parent="Node3D"]
transform = Transform3D(0.984807, 0.173648, 0, -0.173648, 0.984808, 0, 0, 0, 0.999999, -3.91866, 0.438739, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D5" type="CSGBox3D" parent="Node3D"]
transform = Transform3D(0.965925, 0.258819, 0, -0.258819, 0.965926, 0, 0, 0, 0.999999, -5.97202, 0.879514, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D6" type="CSGBox3D" parent="Node3D"]
transform = Transform3D(0.939692, 0.34202, 0, -0.34202, 0.939693, 0, 0, 0, 0.999999, -7.83195, 1.4578, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="Node3D2" type="Node3D" parent="."]
transform = Transform3D(0.993915, 0.110151, 0, -0.110151, 0.993915, 0, 0, 0, 1, -10.3404, -0.890162, 12.421)

[node name="CSGBox3D" type="CSGBox3D" parent="Node3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 0.999999, 0.985379, 0, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D2" type="CSGBox3D" parent="Node3D2"]
transform = Transform3D(0.996194, 0.0871558, 0, -0.0871557, 0.996195, 0, 0, 0, 0.999999, -1.43778, 0.106443, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D3" type="CSGBox3D" parent="Node3D2"]
transform = Transform3D(0.996194, 0.0871558, 0, -0.0871557, 0.996195, 0, 0, 0, 0.999999, -1.43778, 0.106443, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D4" type="CSGBox3D" parent="Node3D2"]
transform = Transform3D(0.984807, 0.173648, 0, -0.173648, 0.984808, 0, 0, 0, 0.999999, -3.91866, 0.438739, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D5" type="CSGBox3D" parent="Node3D2"]
transform = Transform3D(0.965925, 0.258819, 0, -0.258819, 0.965926, 0, 0, 0, 0.999999, -5.97202, 0.879514, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="CSGBox3D6" type="CSGBox3D" parent="Node3D2"]
transform = Transform3D(0.939692, 0.34202, 0, -0.34202, 0.939693, 0, 0, 0, 0.999999, -7.83195, 1.4578, -0.107674)
use_collision = true
size = Vector3(3, 1, 3)

[node name="Mob" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.77421, 0, 0)
script = ExtResource("13_n1egs")
playerPath = NodePath("../Player")

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="Mob"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
radius = 0.354
height = 1.4

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -22.6215)
navmesh = SubResource("NavigationMesh_osh2p")

[connection signal="area_entered" from="Player/InteractArea" to="Player" method="_on_InteractArea_area_entered"]
[connection signal="area_exited" from="Player/InteractArea" to="Player" method="_on_InteractArea_area_exited"]
